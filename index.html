<script>
    // Function to populate the table with data from the JSON file
    async function populateTable() {
        try {
            const response = await fetch('ridesData.json'); // Fetch the JSON file
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const rides = await response.json(); // Parse the JSON data

            const tableBody = document.querySelector('#ridesTable tbody'); // Select the table body

            rides.forEach(ride => {
                const row = document.createElement('tr'); // Create a new row

                // Add table cells for each piece of data
                row.innerHTML = `
                    <td><a href="${ride.organizationLink}">${ride.rideName}</a></td>
                    <td>${ride.startDate}</td>
                    <td>${ride.registrationDeadline}</td>
                    <td>${ride.startLocation}</td>
                    <td>${ride.rideType}</td>
                    <td>${ride.longestRoute}</td>
                    <td>${ride.elevationGain}</td>
                    <td>${ride.rideStatus}</td>
                    <td><a href="${ride.organizationLink}">${ride.organization}</a></td>
                `;

                // Append the row to the table body
                tableBody.appendChild(row);
            });

            // Call the function to apply color changes based on status
            changeColorBasedOnValue();
        } catch (error) {
            console.error("Error loading table data:", error);
        }
    }

    // Function to change color of specific table entries based on text content
    function changeColorBasedOnValue() {
        var rows = document.querySelectorAll("#ridesTable tr"); // Select all table rows

        // Loop through each row (skip the header row)
        for (var i = 1; i < rows.length; i++) {
            var statusCell = rows[i].getElementsByTagName("td")[7]; // Target the "Status" column (index 7)
            if (statusCell) {
                if (statusCell.innerText === "Confirmed") {
                    statusCell.style.backgroundColor = "lightgreen"; // Customize this color
                }
                if (statusCell.innerText === "Planned") {
                    statusCell.style.backgroundColor = "yellow"; // Customize this color
                }
            }
        }
    }

    // Use DOMContentLoaded event to make sure the script runs after the HTML content is loaded
    document.addEventListener("DOMContentLoaded", function () {
        populateTable(); // Populate the table
    });
</script>